<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Issue Tracker Login</title>
    <base href="./index.html">
    <link rel=icon href="https://delaemvsjosami.ru/wp-content/uploads/2017/01/Albert_Einstein.png" title="An Icon">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="screenstyle.css" media="screen">

    <script src="https://www.gstatic.com/firebasejs/5.3.0/firebase.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.3.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.3.0/firebase-auth.js"></script>
    <script>
      // Initialize Firebase
      var config = {
        apiKey: "AIzaSyAvCRHKcOCw-ewrhvBneLa_q6gWuIL5VyU",
        authDomain: "b-website-70993.firebaseapp.com",
        databaseURL: "https://b-website-70993.firebaseio.com",
        projectId: "b-website-70993",
        storageBucket: "b-website-70993.appspot.com",
        messagingSenderId: "183195888057"
      };
      firebase.initializeApp(config);
    </script>
    <script>
      if('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/service-worker.js').then(function(response) {

          console.log('Service worker registered', response);
        }, function(error) {

          console.log('Service worker failed to register', error);
        })
      }
  </script>

  </head>

  <body>
    <div class="banner">
  	  <h1>Issue Tracker Login</h1>
  	  <h2>for Homework 3</h2><br><br>
    </div>    
  	  <p style="font-size:18px;">Enter your username or email address:</p>
  	  <input type="text" name="username" id="userID" required="required">
  	  <p style="font-size:18px;">Enter your password:</p>
  	  <input type="password" name="password" id="userPW" required="required">
  	  <br><br>
  	  <button type="submit" value="Submit" onclick="signin()">Login</button>
    
  	<br><br>
  	<a href="./resetPW">I forgot my <em>username</em> and/or <em>password</em></a>
    <br><br>
  	<a href="./signup.html">Create a <strong>new</strong> account</a>
  	<br><br>
  	<footer>
  	  <small><i>Last edited <time datetime="2018-07-24"><b>7/24/2018</b></time></i></small>
  	</footer>

    <script>
      function signin() {
        var email = document.getElementById("userID").value;
        var pw = document.getElementById("userPW").value;

        firebase.auth().signInWithEmailAndPassword(email,pw).then(function() {
            window.location = "issueList.html";
        },function(error) {
          var errorCode = error.code;
          var errorMessage = error.message;
          if(errorCode == 'auth/wrong-password') {
            alert("Incorrect Password");
          }
          else {
            alert(errorMessage);
          }
          console.log(error);
        });
      }
    </script>

  </body>
</html>